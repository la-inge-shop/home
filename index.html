<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Business Casual - Start Bootstrap Theme</title>
        <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Raleway:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css?family=Lora:400,400i,700,700i" rel="stylesheet" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
        <style>
            .footer-counter {
                margin-top: 10px;
                font-size: 0.9rem;
                color: #6c757d;
            }
        </style>
    </head>
    <body>
        <header>
            <h1 class="site-heading text-center text-faded d-none d-lg-block">
                <span class="site-heading-upper text-primary mb-3">Comida 100% Natural, sin conservadores.</span>
                <span class="site-heading-lower">- La Inge -</span>
            </h1>
        </header>
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-dark py-lg-4" id="mainNav">
            <div class="container">
                <a class="navbar-brand text-uppercase fw-bold d-lg-none" href="index.html">-La Inge-</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav mx-auto">
                        <li class="nav-item px-lg-4"><a class="nav-link text-uppercase" href="index.html">Hogar</a></li>
                        <li class="nav-item px-lg-4"><a class="nav-link text-uppercase" href="about.html">Acerca de</a></li>
                        <li class="nav-item px-lg-4"><a class="nav-link text-uppercase" href="products.html">Nuestra cocina</a></li>
                        <li class="nav-item px-lg-4"><a class="nav-link text-uppercase" href="store.html">Realiza tu pedido!</a></li>
                    </ul>
                </div>
            </div>
        </nav>
        <section class="page-section clearfix">
            <div class="container">
                <div class="intro">
                    <img class="intro-img img-fluid mb-3 mb-lg-0 rounded" src="assets/img/intro.jpg" alt="..." />
                    <div class="intro-text left-0 text-center bg-faded p-5 rounded">
                        <h2 class="section-heading mb-4">
                            <span class="section-heading-upper">Sabor natural, bienestar aut칠ntico, 춰Ahora!. 游꺔</span>
                            <span class="section-heading-lower">쯇roductos org치nicos?</span>
                        </h2>
                        <p class="mb-3">Los productos org치nicos son una opci칩n saludable porque se cultivan y elaboran sin pesticidas, qu칤micos ni conservadores artificiales. Al consumirlos, reduces la exposici칩n a sustancias da침inas, fortaleces tu sistema inmunol칩gico y disfrutas de alimentos con mayor valor nutricional. Elegir org치nico es elegir bienestar para ti y para el planeta.</p>
                        <div class="intro-button mx-auto"><a class="btn btn-primary btn-xl" href="#!">춰Dale sabor!</a></div>
                    </div>
                </div>
            </div>
        </section>
        <section class="page-section cta">
            <div class="container">
                <div class="row">
                    <div class="col-xl-9 mx-auto">
                        <div class="cta-inner bg-faded text-center rounded">
                            <h2 class="section-heading mb-4">
                                <span class="section-heading-upper">Our Promise</span>
                                <span class="section-heading-lower">To You</span>
                            </h2>
                            <p class="mb-0">When you walk into our shop to start your day, we are dedicated to providing you with friendly service, a welcoming atmosphere, and above all else, excellent products made with the highest quality ingredients. If you are not satisfied, please let us know and we will do whatever we can to make things right!</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <footer class="footer text-faded text-center py-5">
            <div class="container">
                <p class="m-0 small">Copyright &copy; Your Website 2023</p>
                <div class="footer-counter" id="counter">Visitas: Cargando...</div>
            </div>
        </footer>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
        <script>
            // URL de tu API de SheetDB (reemplaza con tu URL real)
            const SHEETDB_URL = "https://sheetdb.io/api/v1/jvbe0fp4d9aqu"; // Reemplaza con tu URL de SheetDB

            // Elemento donde se mostrar치 el contador
            const counterElement = document.getElementById('counter');

            // Funci칩n para obtener el n칰mero de visitas
            async function fetchVisits() {
                try {
                    counterElement.textContent = "Visitas: Cargando..."; // Mostrar mensaje de carga
                    const response = await fetch(SHEETDB_URL);

                    // Verificar si la respuesta es exitosa
                    if (!response.ok) {
                        throw new Error(`Error HTTP: ${response.status}`);
                    }

                    const data = await response.json();

                    // Verificar si los datos tienen la estructura esperada
                    if (!Array.isArray(data) || data.length === 0 || !data[0].hasOwnProperty('visits')) {
                        throw new Error("La estructura de los datos no es v치lida.");
                    }

                    const visits = data[0].visits || 0; // Obtener el valor de "visits"
                    counterElement.textContent = `Visitas: ${visits}`;

                    // Actualizar solo si no se ha contado esta visita en esta sesi칩n
                    if (!localStorage.getItem('visitCounted')) {
                        updateVisits(visits);
                        localStorage.setItem('visitCounted', 'true');
                    }
                } catch (error) {
                    console.error("Error al obtener las visitas:", error.message);
                    counterElement.textContent = "Visitas: Error";
                }
            }

            // Funci칩n para actualizar el n칰mero de visitas
            async function updateVisits(currentVisits) {
                const newVisits = parseInt(currentVisits) + 1;
                try {
                    const response = await fetch(SHEETDB_URL, {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({
                            data: [{ visits: newVisits }]
                        })
                    });

                    // Verificar si la actualizaci칩n fue exitosa
                    if (!response.ok) {
                        throw new Error(`Error HTTP al actualizar: ${response.status}`);
                    }
                } catch (error) {
                    console.error("Error al actualizar las visitas:", error.message);
                }
            }

            // Inicializar el contador
            fetchVisits();
        </script>
    </body>
</html>
